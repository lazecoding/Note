# 网络 IO 模型

IO（input output）主要是文件 IO 和网络 IO 两类，本文的重点是网络 IO。

在行文前需要有一个共识：CPU 处理数据的速度远远大于 IO 准备数据的速度，而网络 IO 速度与磁盘读写速度相当，远小于固态和内存读写速度。

### Socket

Socket 又称套接字。

传输层协议将由网络层提供的主机到主机的服务延申到主机上进程到进程的交付服务。一个进程可以拥有一个或者多个套接字（Socket），它相当于从网络向进程传递数据和向网络传递数据的门户。
进程与进程通信，其实并不是直接将数据交付给对方进程，而且通过一个中间的套接字进行交付数据的。每个套接字都有唯一的标识，标识符的格式取决于它是 UDP 还是 TCP 套接字。

Socket 并不是一种协议，而是为方便直接使用更底层协议而存在的一个抽象层。Socket 和 TCP/IP 协议也没有必然联系，只是用 TCP/IP 协议栈更方便而已。所以 Socket 是对 TCP/IP 协议的封装，
它是一组接口，把复杂的 TCP/IP 协议族隐藏在 Socket 接口后面。

<div align="left">
    <img src="https://github.com/lazecoding/Note/blob/main/images/network/Socket通信模型.png" width="600px">
</div>

以 UDP 和 TCP 为例，这两种协议的套接字也是有区别的：

- 一个 UDP 套接字是由一个二元组标识的，该二元组包含一个目的 IP 地址和一个目的端口号。因此，如果两个 UDP 报文段有不同的源 IP 地址或源端口号，但具有相同的目的 IP 地址和目的端口号，
那么这两个报文段将通过相同的套接字被定向到相同的进程。
- 一个 TCP 套接字是由一个四元组标识的，该四元组包含源 IP 地址、源端口号、目的 IP 地址、目的端口号。这样，当一个 TCP 报文段从网络到达一个主机时，该主机使用四元组来将报文定向到对应的套接字。



